{{ title 'Manage Crate Owners' }}

<div class="crates-heading">
  {{svg-jar "gear"}}
  <h1>Manage Crate Owners</h1>
  <h2>{{ this.crate.name }}</h2>
</div>

<div id="me-email">
  <h2>Add Owner</h2>

  {{#if this.error}}
    <p data-test-error-message>{{this.error}}</p>
  {{/if}}

  {{#if this.invited}}
    <p data-test-invited-message>{{this.invited}}</p>
  {{/if}}

  <div class="row">
    <form class="email-form" {{action 'addOwner' on='submit'}}>
      <label class="label" for='new-owner-username'>
        Username
      </label>
      <Input @type="text" id="new-owner-username" @value={{this.username}} placeholder="Username" class="form-control space-right" @name="username" />

      <div class="actions">
        <button type="submit" local-class="submit-button" data-test-save-button>Save</button>
      </div>
    </form>
  </div>
</div>

<h2>Owners</h2>

{{#if this.removed}}
  <p data-test-removed-message>{{this.removed}}</p>
{{/if}}

<div local-class='list' data-test-owners>
  {{#each this.crate.owner_team as |team|}}
    <div local-class='row' data-test-owner-team={{team.login}}>
      <LinkTo @route={{team.kind}} @model={{team.login}}>
        <UserAvatar @user={{team}} @size="medium-small" />
      </LinkTo>
      <LinkTo @route={{team.kind}} @model={{team.login}}>
        {{team.display_name}}
      </LinkTo>
      <div local-class="email-column">
        {{team.email}}
      </div>
      <button type="button" local-class="remove-button" data-test-remove-owner-button {{action 'removeOwner' team}}>Remove</button>
    </div>
  {{/each}}
  {{#each this.crate.owner_user as |user|}}
    <div local-class='row' data-test-owner-user={{user.login}}>
      <LinkTo @route={{user.kind}} @model={{user.login}}>
        <UserAvatar @user={{user}} @size="medium-small" />
      </LinkTo>
      <LinkTo @route={{user.kind}} @model={{user.login}}>
        {{ user.name }}
      </LinkTo>
      <div local-class="email-column">
        {{user.email}}
      </div>
      <button type="button" local-class="remove-button" data-test-remove-owner-button {{action 'removeOwner' user}}>Remove</button>
    </div>
  {{/each}}
</div>
